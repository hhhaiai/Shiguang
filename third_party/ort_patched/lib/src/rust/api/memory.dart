// This file is automatically generated, so please do not edit it.
// @generated by `flutter_rust_bridge`@ 2.11.1.

// ignore_for_file: invalid_use_of_internal_member, unused_import, unnecessary_import

import '../frb_generated.dart';
import 'package:flutter_rust_bridge/flutter_rust_bridge_for_generated.dart';
import 'package:freezed_annotation/freezed_annotation.dart' hide protected;
part 'memory.freezed.dart';

// These functions are ignored (category: IgnoreBecauseExplicitAttribute): `from_str`, `new`, `to_ort_allocation_device`

// Rust type: RustOpaqueMoi<flutter_rust_bridge::for_generated::RustAutoOpaqueInner<MemoryInfo>>
abstract class MemoryInfo implements RustOpaqueInterface {
  /// Returns the [`AllocationDevice`] this struct was created with.
  /// ```
  /// # use ort::memory::{MemoryInfo, MemoryType, AllocationDevice, AllocatorType};
  /// # fn main() -> ort::Result<()> {
  /// let mem = MemoryInfo::new(AllocationDevice::CPU, 0, AllocatorType::Device, MemoryType::Default)?;
  /// assert_eq!(mem.allocation_device(), AllocationDevice::CPU);
  /// # Ok(())
  /// # }
  /// ```
  AllocationDevice allocationDevice();

  /// Returns the [`AllocatorType`] described by this struct.
  /// ```
  /// # use ort::memory::{MemoryInfo, MemoryType, AllocationDevice, AllocatorType};
  /// # fn main() -> ort::Result<()> {
  /// let mem = MemoryInfo::new(AllocationDevice::CPU, 0, AllocatorType::Device, MemoryType::Default)?;
  /// assert_eq!(mem.allocator_type(), AllocatorType::Device);
  /// # Ok(())
  /// # }
  /// ```
  AllocatorType allocatorType();

  /// Returns the ID of the [`AllocationDevice`] described by this struct.
  /// ```
  /// # use ort::memory::{MemoryInfo, MemoryType, AllocationDevice, AllocatorType};
  /// # fn main() -> ort::Result<()> {
  /// let mem = MemoryInfo::new(AllocationDevice::CPU, 0, AllocatorType::Device, MemoryType::Default)?;
  /// assert_eq!(mem.device_id(), 0);
  /// # Ok(())
  /// # }
  /// ```
  int deviceId();

  /// Returns the type of device (CPU/GPU) this memory is allocated on.
  DeviceType deviceType();

  /// Returns `true` if this memory is accessible by the CPU; meaning that, if a value were allocated on this device,
  /// it could be extracted to an `ndarray` or slice.
  bool isCpuAccessible();

  /// Returns the [`MemoryType`] described by this struct.
  /// ```
  /// # use ort::memory::{MemoryInfo, MemoryType, AllocationDevice, AllocatorType};
  /// # fn main() -> ort::Result<()> {
  /// let mem = MemoryInfo::new(AllocationDevice::CPU, 0, AllocatorType::Device, MemoryType::Default)?;
  /// assert_eq!(mem.memory_type(), MemoryType::Default);
  /// # Ok(())
  /// # }
  /// ```
  MemoryType memoryType();
}

@freezed
sealed class AllocationDevice with _$AllocationDevice {
  const AllocationDevice._();

  const factory AllocationDevice.cpu() = AllocationDevice_Cpu;
  const factory AllocationDevice.cuda() = AllocationDevice_Cuda;
  const factory AllocationDevice.cudaPinned() = AllocationDevice_CudaPinned;
  const factory AllocationDevice.cann() = AllocationDevice_Cann;
  const factory AllocationDevice.cannPinned() = AllocationDevice_CannPinned;
  const factory AllocationDevice.directMl() = AllocationDevice_DirectML;
  const factory AllocationDevice.hip() = AllocationDevice_Hip;
  const factory AllocationDevice.hipPinned() = AllocationDevice_HipPinned;
  const factory AllocationDevice.openVinoCpu() = AllocationDevice_OpenVinoCpu;
  const factory AllocationDevice.openVinoGpu() = AllocationDevice_OpenVinoGpu;
  const factory AllocationDevice.qnnHtpShared() = AllocationDevice_QnnHtpShared;
  const factory AllocationDevice.webGpuBuffer() = AllocationDevice_WebGpuBuffer;

  /// A [AllocationDevice] that is not known in the predefined devices.
  const factory AllocationDevice.other(String field0) = AllocationDevice_Other;
}

/// Execution provider allocator type.
enum AllocatorType {
  /// Default device-specific allocator.
  device,

  /// Arena allocator.
  arena,
}

enum DeviceType { cpu, gpu, fpga }

/// Memory types for allocated memory.
enum MemoryType {
  /// Any CPU memory used by non-CPU execution provider.
  cpuInput,

  /// CPU-accessible memory output by a non-CPU execution provider, i.e. [`AllocationDevice::CudaPinned`].
  cpuOutput,

  /// The default (typically device memory) allocator for an execution provider.
  default_,
}
