# 交互设计文档

## 主要交互流程

### 流程1：语音快速录入（移动端核心流程）

**用户场景**：用户在咖啡店突然有灵感

**操作路径**：
1. 打开App → 自动登录 → 点击麦克风按钮
2. 检查录音权限 → 启动WebSocket连接
3. 实时录音(PCM流) → SenseVoice识别 → 文本流式显示
4. 用户点击"完成"或自动静音检测结束
5. 生成384维向量 → Qwen生成摘要/标签
6. 存入ObjectBox → 时间轴自动刷新 → 显示成功提示

**关键交互点**：
- **麦克风按钮**：长按开始录音，松手结束；录音时显示脉冲动画
- **文本显示**：实时显示识别结果，支持即时编辑
- **状态反馈**：录音波形动画 + 音量指示器
- **错误处理**：网络断开自动重连，权限拒绝引导设置

**预期耗时**：全程 < 10秒

**中断恢复**：支持后台录音，中断后自动恢复

---

### 流程2：PC端全局捕获（未来功能）

**用户场景**：工作时看到重要信息需要快速记录

**操作路径**：
1. 按下全局快捷键(Ctrl+Shift+A) → 唤起捕获界面
2. 选择捕获模式：文本/截图/OCR
3. **文本模式**：快速输入框 → AI处理 → 保存
4. **截图模式**：区域选择 → OCR识别 → AI处理 → 保存
5. **OCR模式**：全屏截图 → 文字提取 → AI处理 → 保存

**关键交互点**：
- **快捷键**：可自定义，支持全局监听
- **区域选择**：十字准星 + 放大镜预览
- **OCR预览**：识别结果高亮显示，支持编辑修正
- **静默保存**：支持后台自动处理，不打扰用户工作

---

### 流程3：语义检索（核心差异化功能）

**用户场景**：用户想查找之前关于"项目"的记录

**操作路径**：
1. 在搜索框输入自然语言（如："上周关于AI的讨论"）
2. 生成查询向量384维
3. HNSW索引检索 → 返回Top-K相似结果
4. RAG增强 → 融合上下文 → 生成回答
5. 展示结果列表 + AI总结回答

**关键交互点**：
- **搜索框**：支持自然语言，无需关键词
- **实时建议**：输入时显示相关记忆提示
- **结果展示**：相似度分数 + 高亮匹配片段
- **AI回答**：顶部显示RAG生成的总结回答
- **筛选器**：支持按时间、标签、类型筛选

**预期耗时**：搜索 < 1秒，结果展示 < 100ms

---

### 流程4：多用户切换

**用户场景**：家庭成员共用设备，需要切换账号

**操作路径**：
1. 点击头像 → 进入用户管理
2. 选择用户 → 输入PIN码
3. 验证通过 → 切换数据上下文
4. 时间轴自动刷新 → 显示新用户数据

**关键交互点**：
- **快速切换**：支持手势/快捷键切换
- **数据隔离**：切换时清空内存缓存
- **隐私保护**：后台自动锁定，需重新验证

---

### 流程5：日历/闹钟提醒设置（新增）

**用户场景**：用户记录一条“明天上午10点开会”的碎片，想要提醒

**操作路径**：
1. 语音/文本录入 → AI 识别出时间点与待办
2. 弹出“建议提醒”卡片（可一键确认）
3. 用户确认 → 生成本地提醒并调度系统闹钟
4. 到点触发通知 → 点击进入对应日记详情

**关键交互点**：
- **建议提醒**：可一键确认或编辑时间
- **重复规则**：支持“每天/每周/每月/自定义”
- **静默模式**：可设置仅通知不响铃
- **隐私保护**：锁屏通知可隐藏正文

---

### 流程6：内容编辑与分享

**用户场景**：用户想修改日记或分享给朋友

**编辑流程**：
1. 点击时间轴卡片 → 进入详情页
2. 点击"编辑"按钮 → 进入编辑模式
3. 修改内容 → AI重新生成摘要/标签
4. 保存 → 更新向量 → 同步数据库

**分享流程**：
1. 点击"分享"按钮 → 选择分享样式
2. 生成精美卡片图 → 预览效果
3. 选择分享渠道 → 调用系统分享面板

**关键交互点**：
- **版本管理**：编辑前自动保存历史版本
- **样式选择**：多种主题模板（简约/文艺/科技）
- **隐私保护**：分享前自动脱敏（可选）

---

## 交互设计规范

### 1. 动效设计

| 动效类型 | 时长 | 缓动函数 | 使用场景 |
|----------|------|----------|----------|
| **卡片入场** | 300ms | ease-out | 时间轴卡片加载 |
| **按钮反馈** | 100ms | linear | 点击/长按 |
| **页面转场** | 400ms | ease-in-out | 模态页切换 |
| **语音波形** | 持续 | linear | 录音状态 |
| **加载动画** | 800ms | ease-in-out | AI处理中 |

### 2. 手势操作

| 手势 | 操作 | 反馈 |
|------|------|------|
| **左滑** | 删除条目 | 显示删除按钮 + 震动 |
| **右滑** | 返回上一级 | 页面跟随手势移动 |
| **长按** | 多选/菜单 | 轻微震动 + 视觉反馈 |
| **双击** | 快速编辑 | 进入编辑模式 |
| **捏合** | 缩放字体 | 实时预览 |

### 3. 状态反馈

| 状态 | 视觉提示 | 音频提示 |
|------|----------|----------|
| **录音中** | 红色脉冲 + 时间计数 | 可选提示音 |
| **AI处理中** | 进度环 + 文字提示 | 无 |
| **同步中** | 小旋转图标 | 无 |
| **成功** | 绿色勾选 + 轻微弹跳 | 成功提示音 |
| **错误** | 红色提示条 + 震动 | 错误提示音 |

### 4. 空状态设计

| 场景 | 文案 | 操作引导 |
|------|------|----------|
| **首次使用** | "开始记录你的第一个想法" | 显示麦克风按钮动画 |
| **无搜索结果** | "没有找到相关记忆" | 提示调整搜索词 |
| **无语音权限** | "需要麦克风权限才能录音" | 跳转到设置按钮 |
| **无网络** | "离线模式 - 功能受限" | 显示可用功能 |

---

## 与Dawnary的交互对比

### 相似点（85%）

1. **视觉风格**：大面积留白、极简设计
2. **时间轴布局**：卡片+圆点+时间
3. **动效节奏**：300-400ms ease-out
4. **手势操作**：滑动、长按、点击反馈

### 差异点（15%）

| 功能 | Dawnary | AI Brain | 设计理由 |
|------|---------|----------|----------|
| **录入方式** | 手动输入 | 语音优先 | 降低记录门槛，适合碎片化 |
| **信息展示** | 纯文本 | 文本+标签+相似记忆 | AI增强，提供更多上下文 |
| **检索方式** | 关键词 | 语义搜索 | 更符合自然语言习惯 |
| **跨端支持** | 仅移动端 | 移动端+PC+Web | 全场景覆盖 |

---

## 未来交互增强

### Phase 2 计划
- [ ] PC端全局快捷键捕获
- [ ] 截图OCR交互
- [ ] 日历视图切换
- [ ] 标签管理界面
- [ ] 日历/闹钟提醒设置

### Phase 3 计划
- [ ] 语音指令控制
- [ ] 智能提醒交互
- [ ] 知识图谱可视化
- [ ] 多端协同编辑
